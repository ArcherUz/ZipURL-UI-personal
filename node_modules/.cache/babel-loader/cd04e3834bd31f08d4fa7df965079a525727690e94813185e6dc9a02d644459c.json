{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UrlDecoder(){const[shortUrl,setShortUrl]=useState(\"\");const[error,setError]=useState(\"\");const navigate=useNavigate();useEffect(()=>{// Redirect to homepage if JWT token is not present\nconst jwtToken=localStorage.getItem(\"jwtToken\");if(!jwtToken){navigate(\"/\");}},[navigate]);const decodeUrl=async event=>{event.preventDefault();const jwtToken=localStorage.getItem(\"jwtToken\");if(!jwtToken){navigate(\"/\");return;}try{const response=await axios.get(\"http://99.79.70.20:8080/api/urls/\".concat(shortUrl),{headers:{Authorization:\"Bearer \".concat(jwtToken)}});// The backend is expected to redirect, but we'll handle redirection in the frontend for demonstration\nwindow.location.href=response.request.responseURL;}catch(err){setError(err.response?err.response.data.message:\"An error occurred. Please try again later.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Decode URL\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:decodeUrl,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"shortUrl\",children:\"Short URL Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"shortUrl\",placeholder:\"Enter the code (e.g., kzwXX)\",value:shortUrl,onChange:e=>setShortUrl(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Decode\"})]})]});}export default UrlDecoder;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","UrlDecoder","shortUrl","setShortUrl","error","setError","navigate","jwtToken","localStorage","getItem","decodeUrl","event","preventDefault","response","get","concat","headers","Authorization","window","location","href","request","responseURL","err","data","message","className","children","onSubmit","htmlFor","type","id","placeholder","value","onChange","e","target","required"],"sources":["C:/vscode/UI/login-app/src/components/UrlDecoder.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nfunction UrlDecoder() {\r\n  const [shortUrl, setShortUrl] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Redirect to homepage if JWT token is not present\r\n    const jwtToken = localStorage.getItem(\"jwtToken\");\r\n    if (!jwtToken) {\r\n      navigate(\"/\");\r\n    }\r\n  }, [navigate]);\r\n\r\n  const decodeUrl = async (event) => {\r\n    event.preventDefault();\r\n    const jwtToken = localStorage.getItem(\"jwtToken\");\r\n    if (!jwtToken) {\r\n      navigate(\"/\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.get(\r\n        `http://99.79.70.20:8080/api/urls/${shortUrl}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${jwtToken}`,\r\n          },\r\n        }\r\n      );\r\n      // The backend is expected to redirect, but we'll handle redirection in the frontend for demonstration\r\n      window.location.href = response.request.responseURL;\r\n    } catch (err) {\r\n      setError(\r\n        err.response\r\n          ? err.response.data.message\r\n          : \"An error occurred. Please try again later.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Decode URL</h2>\r\n      {error && <div className=\"alert alert-danger\">{error}</div>}\r\n      <form onSubmit={decodeUrl}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"shortUrl\">Short URL Code</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"shortUrl\"\r\n            placeholder=\"Enter the code (e.g., kzwXX)\"\r\n            value={shortUrl}\r\n            onChange={(e) => setShortUrl(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Decode\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UrlDecoder;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAa,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAa,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,GAAI,CAACF,QAAQ,CAAE,CACbD,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAI,SAAS,CAAG,KAAO,CAAAC,KAAK,EAAK,CACjCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtB,KAAM,CAAAL,QAAQ,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACjD,GAAI,CAACF,QAAQ,CAAE,CACbD,QAAQ,CAAC,GAAG,CAAC,CACb,OACF,CAEA,GAAI,CACF,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,qCAAAC,MAAA,CACMb,QAAQ,EAC5C,CACEc,OAAO,CAAE,CACPC,aAAa,WAAAF,MAAA,CAAYR,QAAQ,CACnC,CACF,CACF,CAAC,CACD;AACAW,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGP,QAAQ,CAACQ,OAAO,CAACC,WAAW,CACrD,CAAE,MAAOC,GAAG,CAAE,CACZlB,QAAQ,CACNkB,GAAG,CAACV,QAAQ,CACRU,GAAG,CAACV,QAAQ,CAACW,IAAI,CAACC,OAAO,CACzB,4CACN,CAAC,CACH,CACF,CAAC,CAED,mBACEzB,KAAA,QAAK0B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB7B,IAAA,OAAA6B,QAAA,CAAI,YAAU,CAAI,CAAC,CAClBvB,KAAK,eAAIN,IAAA,QAAK4B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAEvB,KAAK,CAAM,CAAC,cAC3DJ,KAAA,SAAM4B,QAAQ,CAAElB,SAAU,CAAAiB,QAAA,eACxB3B,KAAA,QAAK0B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB7B,IAAA,UAAO+B,OAAO,CAAC,UAAU,CAAAF,QAAA,CAAC,gBAAc,CAAO,CAAC,cAChD7B,IAAA,UACEgC,IAAI,CAAC,MAAM,CACXJ,SAAS,CAAC,cAAc,CACxBK,EAAE,CAAC,UAAU,CACbC,WAAW,CAAC,8BAA8B,CAC1CC,KAAK,CAAE/B,QAAS,CAChBgC,QAAQ,CAAGC,CAAC,EAAKhC,WAAW,CAACgC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CI,QAAQ,MACT,CAAC,EACC,CAAC,cACNvC,IAAA,WAAQgC,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,QAElD,CAAQ,CAAC,EACL,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAA1B,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}